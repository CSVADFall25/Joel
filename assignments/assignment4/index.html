<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>EssentiaTest - Music Analysis Visualization</title>

    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="libraries/p5.min.js"></script>
  </head>

  <body>
    <!-- Load Essentia.js modules -->
    <script type="module">
      import Essentia from 'https://cdn.jsdelivr.net/npm/essentia.js@0.1.3/dist/essentia.js-core.es.js';
      import { EssentiaWASM } from 'https://cdn.jsdelivr.net/npm/essentia.js@0.1.3/dist/essentia-wasm.es.js';
      
      // Initialize Essentia.js - just creating the instance is enough
      try {
        const essentia = new Essentia(EssentiaWASM);
        window.essentia = essentia;
        window.essentiaLoaded = true;
        console.log('✅ Essentia.js initialized successfully');
        console.log('Available algorithms:', Object.keys(essentia).slice(0, 20));
      } catch (err) {
        console.error('❌ Failed to initialize Essentia.js:', err);
        window.essentia = null;
        window.essentiaLoaded = false;
      }
    </script>
    
    <!-- Application modules -->
    <script src="js/AudioManager.js"></script>
    <script src="js/EssentiaAnalyzer.js"></script>
    <script src="js/AudioPlayerUI.js"></script>
    <script src="sketch.js"></script>
  </body>
</html>
